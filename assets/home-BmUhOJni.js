import{y as j,p as e,x as i}from"./chunk-WWGJGFF6-C1k8rglg.js";import{u as y,j as v}from"./gql-BN5l4yyr.js";import{S as N,I as l,b as S,G as E}from"./visualization.queries-BwJN6T7Z.js";import{P as d,a as _,D as m}from"./progress-stages-526PVMKw.js";const P=t=>!!t&&d.includes(t),R=t=>!!t&&Object.hasOwn(m,t),h=t=>{if(!P(t))return{stage:t,index:-1,percentage:0,label:"未知階段",isValid:!1};const n=d.indexOf(t),s=d.length,a=s?Math.round((n+1)/s*100):0;return{stage:t,index:n,percentage:a,label:_[t],isValid:!0}},T=(t,n,s)=>{const a=h(n),o=R(s)?m[s]:"進行中";return{text:t?`${t} 年度中央政府總預算${o}`:"載入中...",percentage:a.percentage,stageLabel:a.label,stageMeta:a}};function C(t){return h(t).percentage}function A(t,n){return T(t,null,n).text}function O(){return[{title:"中央政府總預算案審查監督平台"},{name:"description",content:"收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。"}]}const D=()=>[{rel:"preload",as:"image",href:`${N}/image/homepage-banner.svg`,fetchpriority:"high"}],W=j(function(){var x;const s=new Date().getFullYear()-1911,{data:a,isLoading:o,isError:g}=y({queryKey:S.latest(),queryFn:()=>v(E,{skip:0,take:1})}),r=((x=a==null?void 0:a.budgetYears)==null?void 0:x[0])??null,u=r==null?void 0:r.budgetProgress,f=C(u),b=A((r==null?void 0:r.year)??null,(r==null?void 0:r.dataProgress)??null),p=[{label:"歷年預算",href:"/all-budgets"},{label:"最新年度預算",href:`/all-budgets?year=${s}`},{label:"視覺化專區",href:"/visualization"},{label:"協作區",href:"/collaboration"}];return e.jsxs("div",{className:"bg-background flex h-full flex-col justify-between p-5 md:p-8",children:[e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("header",{className:"mb-8 text-center md:mb-12",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold text-gray-900 md:text-4xl",children:"中央政府總預算案審查監督平台"}),e.jsxs("div",{className:"relative mb-8 flex flex-col items-center justify-center",children:[e.jsx(l,{src:"/image/homepage-banner.svg",alt:"國會預算監督平台 Banner",width:380,height:189,loading:"eager",fetchPriority:"high",className:"h-auto w-full max-w-xl"}),o?e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-gray-300 p-2 text-gray-600",children:"載入審議進度中..."}):g?e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-red-100 p-2 text-red-600",children:"審議進度載入失敗，請稍後再試"}):r?e.jsxs("div",{className:"max-w-banner bg-brand-primary relative -mt-1 flex min-h-[48px] w-full items-center justify-start rounded-lg pl-1 text-white",children:[e.jsx("div",{className:"border-brand-primary text-brand-primary absolute top-0 left-1/2 flex -translate-x-1/2 -translate-y-5/6 items-center justify-center rounded-lg border-2 bg-white px-1.5 py-2 text-center text-base font-bold shadow-lg md:hidden",children:"最新審議進度"}),e.jsx("p",{className:"text-brand-primary mr-2 hidden w-[160px] rounded-lg bg-white px-3.5 py-2 md:flex",children:"最新審議進度"}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("p",{className:"flex grow justify-center border-r border-white py-2",children:b}),e.jsxs("p",{className:"flex px-2",children:[f,"%"]})]})]}):e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-gray-300 p-2 text-gray-600",children:"暫無審議進度資料"})]}),e.jsx("p",{className:"mx-auto max-w-2xl text-base leading-relaxed text-gray-700 md:text-lg",children:"收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。還可透過視覺化方式瀏覽，一目暸然。除了已數位化的資料，此平台也透過群眾協力（crowdsourcing）辨識提案掃描檔，歡迎至協作區加入合作行列。"})]}),e.jsx("nav",{className:"flex flex-col gap-3 md:grid md:grid-cols-2 md:gap-6 lg:grid-cols-4 lg:gap-4","aria-label":"main navigate",children:p.map(c=>e.jsx(i,{to:c.href,className:({isActive:w})=>`border-brand-accent flex min-h-[72px] w-full items-center justify-center rounded-lg border-3 px-6 py-4 text-center text-lg font-medium transition-colors ${w?"bg-brand-accent":"hover:bg-brand-accent bg-white hover:text-black"} focus:ring-brand-accent text-budget-accent focus:ring-2 focus:ring-offset-2 focus:outline-none`,children:c.label},c.label))})]}),e.jsxs("div",{className:"mt-15 flex items-center justify-center gap-x-2 md:mt-25 md:gap-x-3",children:[e.jsx(i,{to:"https://www.readr.tw/",target:"_blank",rel:"noopener noreferrer","aria-label":"Readr",children:e.jsx(l,{src:"/image/readr-logo.svg",alt:"Readr logo",width:110,height:48})}),e.jsx(i,{to:"https://www.freiheit.org/zh/taiwan",target:"_blank",rel:"noopener noreferrer","aria-label":"Friedrich Naumann Foundation",children:e.jsx(l,{src:"/image/Friedrich-Naumann-Foundation-logo.svg",alt:"Friedrich-Naumann-Foundation-logo",width:130,height:48,className:"h-auto w-[130px] md:w-50"})}),e.jsx(i,{to:"https://ccw.org.tw/",target:"_blank",rel:"noopener noreferrer","aria-label":"Citizen Congress Watch",children:e.jsx(l,{src:"/image/CCW-logo.svg",alt:"Citizen-Watch-logo",width:90,height:48})}),e.jsx(l,{src:"/image/donate-CCW-logo.svg",alt:"donate-CCW-logo",width:120,height:48})]})]})});export{W as default,D as links,O as meta};
