import{y as j,p as e,x as w}from"./chunk-WWGJGFF6-C1k8rglg.js";import{u as y,j as v}from"./gql-B77SbNtU.js";import{S as N,I as l,b as S,G as E}from"./visualization.queries-BsSTzKn-.js";import{P as c,a as P,D as x}from"./progress-stages-526PVMKw.js";const R=t=>!!t&&c.includes(t),T=t=>!!t&&Object.hasOwn(x,t),g=t=>{if(!R(t))return{stage:t,index:-1,percentage:0,label:"未知階段",isValid:!1};const s=c.indexOf(t),n=c.length,a=n?Math.round((s+1)/n*100):0;return{stage:t,index:s,percentage:a,label:P[t],isValid:!0}},_=(t,s,n)=>{const a=g(s),i=T(n)?x[n]:"進行中";return{text:t?`${t} 年度中央政府總預算${i}`:"載入中...",percentage:a.percentage,stageLabel:a.label,stageMeta:a}};function A(t){return g(t).percentage}function C(t,s){return _(t,null,s).text}function k(){return[{title:"中央政府總預算案審查監督平台"},{name:"description",content:"收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。"}]}const D=()=>[{rel:"preload",as:"image",href:`${N}/image/homepage-banner.svg`,fetchpriority:"high"}],$=j(function(){var m;const n=new Date().getFullYear()-1911,{data:a,isLoading:i,isError:d}=y({queryKey:S.latest(),queryFn:()=>v(E,{skip:0,take:1})}),r=((m=a==null?void 0:a.budgetYears)==null?void 0:m[0])??null,h=r==null?void 0:r.budgetProgress,u=A(h),f=C((r==null?void 0:r.year)??null,(r==null?void 0:r.dataProgress)??null),b=[{label:"歷年預算",href:"/all-budgets"},{label:"最新年度預算",href:`/all-budgets?year=${n}`},{label:"視覺化專區",href:"/visualization"},{label:"協作區",href:"/collaboration"}];return e.jsxs("div",{className:"bg-background flex h-full flex-col justify-between p-5 md:p-8",children:[e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("header",{className:"mb-8 text-center md:mb-12",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold text-gray-900 md:text-4xl",children:"中央政府總預算案審查監督平台"}),e.jsxs("div",{className:"relative mb-8 flex flex-col items-center justify-center",children:[e.jsx(l,{src:"/image/homepage-banner.svg",alt:"國會預算監督平台 Banner",width:380,height:189,loading:"eager",fetchPriority:"high",className:"h-auto w-full max-w-xl"}),i?e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-gray-300 p-2 text-gray-600",children:"載入審議進度中..."}):d?e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-red-100 p-2 text-red-600",children:"審議進度載入失敗，請稍後再試"}):r?e.jsxs("div",{className:"max-w-banner bg-brand-primary relative -mt-1 flex min-h-[48px] w-full items-center justify-start rounded-lg pl-1 text-white",children:[e.jsx("div",{className:"border-brand-primary text-brand-primary absolute top-0 left-1/2 flex -translate-x-1/2 -translate-y-5/6 items-center justify-center rounded-lg border-2 bg-white px-1.5 py-2 text-center text-base font-bold shadow-lg md:hidden",children:"最新審議進度"}),e.jsx("p",{className:"text-brand-primary mr-2 hidden w-[160px] rounded-lg bg-white px-3.5 py-2 md:flex",children:"最新審議進度"}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("p",{className:"flex grow justify-center border-r border-white py-2",children:f}),e.jsxs("p",{className:"flex px-2",children:[u,"%"]})]})]}):e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-gray-300 p-2 text-gray-600",children:"暫無審議進度資料"})]}),e.jsx("p",{className:"mx-auto max-w-2xl text-base leading-relaxed text-gray-700 md:text-lg",children:"收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。還可透過視覺化方式瀏覽，一目暸然。除了已數位化的資料，此平台也透過群眾協力（crowdsourcing）辨識提案掃描檔，歡迎至協作區加入合作行列。"})]}),e.jsx("nav",{className:"flex flex-col gap-3 md:grid md:grid-cols-2 md:gap-6 lg:grid-cols-4 lg:gap-4","aria-label":"主要導航",children:b.map(o=>e.jsx(w,{to:o.href,className:({isActive:p})=>`border-brand-accent flex min-h-[72px] w-full items-center justify-center rounded-lg border-3 px-6 py-4 text-center text-lg font-medium transition-colors ${p?"bg-brand-accent":"hover:bg-brand-accent bg-white hover:text-black"} focus:ring-brand-accent text-budget-accent focus:ring-2 focus:ring-offset-2 focus:outline-none`,children:o.label},o.label))})]}),e.jsxs("div",{className:"mt-15 flex items-center justify-center gap-x-2 md:mt-25 md:gap-x-3",children:[e.jsx(l,{src:"/image/readr-logo.svg",alt:"Readr logo",width:110,height:48}),e.jsx(l,{src:"/image/Friedrich-Naumann-Foundation-logo.svg",alt:"Friedrich-Naumann-Foundation-logo",width:130,height:48,className:"h-auto w-[130px] md:w-50"}),e.jsx(l,{src:"/image/CCW-logo.svg",alt:"Citizen-Watch-logo",width:90,height:48}),e.jsx(l,{src:"/image/donate-CCW-logo.svg",alt:"donate-CCW-logo",width:120,height:48})]})]})});export{$ as default,D as links,k as meta};
