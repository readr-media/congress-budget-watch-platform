import{a as l,p as a,H as ot,x as ae,R as U}from"./chunk-4WY6JWTD-2Cr-QbDP.js";import{b as de,a as G,P as M,e as st,c as it,d as Z,f as k,g as se,h as lt,j as ct,D as ut,k as dt,l as ft}from"./index-CSMLMQiO.js";import{u as vt,a as pt}from"./index-Ck08PhAW.js";import"./index-CtMSh7YR.js";import{u as je,V as Ee}from"./VoteButtons-BlyMeqhI.js";import"./visualization.queries-BUVrj-cD.js";import"./gql-Mx7Ziu-8.js";import"./helpers-DCGy3gpM.js";import"./middleware-By82NwCX.js";import"./mutation-DIYO7IxG.js";var q="focusScope.autoFocusOnMount",Q="focusScope.autoFocusOnUnmount",fe={bubbles:!1,cancelable:!0},mt="FocusScope",Ce=l.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...c}=e,[i,f]=l.useState(null),v=de(o),p=de(s),d=l.useRef(null),g=G(t,u=>f(u)),x=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(n){let u=function(b){if(x.paused||!i)return;const w=b.target;i.contains(w)?d.current=w:R(d.current,{select:!0})},m=function(b){if(x.paused||!i)return;const w=b.relatedTarget;w!==null&&(i.contains(w)||R(d.current,{select:!0}))},h=function(b){if(document.activeElement===document.body)for(const j of b)j.removedNodes.length>0&&R(i)};document.addEventListener("focusin",u),document.addEventListener("focusout",m);const y=new MutationObserver(h);return i&&y.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",u),document.removeEventListener("focusout",m),y.disconnect()}}},[n,i,x.paused]),l.useEffect(()=>{if(i){pe.add(x);const u=document.activeElement;if(!i.contains(u)){const h=new CustomEvent(q,fe);i.addEventListener(q,v),i.dispatchEvent(h),h.defaultPrevented||(ht(wt(Ne(i)),{select:!0}),document.activeElement===u&&R(i))}return()=>{i.removeEventListener(q,v),setTimeout(()=>{const h=new CustomEvent(Q,fe);i.addEventListener(Q,p),i.dispatchEvent(h),h.defaultPrevented||R(u??document.body,{select:!0}),i.removeEventListener(Q,p),pe.remove(x)},0)}}},[i,v,p,x]);const E=l.useCallback(u=>{if(!r&&!n||x.paused)return;const m=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,h=document.activeElement;if(m&&h){const y=u.currentTarget,[b,w]=gt(y);b&&w?!u.shiftKey&&h===w?(u.preventDefault(),r&&R(b,{select:!0})):u.shiftKey&&h===b&&(u.preventDefault(),r&&R(w,{select:!0})):h===y&&u.preventDefault()}},[r,n,x.paused]);return a.jsx(M.div,{tabIndex:-1,...c,ref:g,onKeyDown:E})});Ce.displayName=mt;function ht(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(R(n,{select:t}),document.activeElement!==r)return}function gt(e){const t=Ne(e),r=ve(t,e),n=ve(t.reverse(),e);return[r,n]}function Ne(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ve(e,t){for(const r of e)if(!xt(r,{upTo:t}))return r}function xt(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function yt(e){return e instanceof HTMLInputElement&&"select"in e}function R(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&yt(e)&&t&&e.select()}}var pe=bt();function bt(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=me(e,t),e.unshift(t)},remove(t){var r;e=me(e,t),(r=e[0])==null||r.resume()}}}function me(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function wt(e){return e.filter(t=>t.tagName!=="A")}var J=0;function jt(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??he()),document.body.insertAdjacentElement("beforeend",e[1]??he()),J++,()=>{J===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),J--}},[])}function he(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var N=function(){return N=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},N.apply(this,arguments)};function Se(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Et(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var V="right-scroll-bar-position",H="width-before-scroll-bar",Ct="with-scroll-bars-hidden",Nt="--removed-body-scroll-bar-size";function ee(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function St(e,t){var r=l.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var Rt=typeof window<"u"?l.useLayoutEffect:l.useEffect,ge=new WeakMap;function _t(e,t){var r=St(null,function(n){return e.forEach(function(o){return ee(o,n)})});return Rt(function(){var n=ge.get(r);if(n){var o=new Set(n),s=new Set(e),c=r.current;o.forEach(function(i){s.has(i)||ee(i,null)}),s.forEach(function(i){o.has(i)||ee(i,c)})}ge.set(r,e)},[e]),r}function Dt(e){return e}function Tt(e,t){t===void 0&&(t=Dt);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var c=t(s,n);return r.push(c),function(){r=r.filter(function(i){return i!==c})}},assignSyncMedium:function(s){for(n=!0;r.length;){var c=r;r=[],c.forEach(s)}r={push:function(i){return s(i)},filter:function(){return r}}},assignMedium:function(s){n=!0;var c=[];if(r.length){var i=r;r=[],i.forEach(s),c=r}var f=function(){var p=c;c=[],p.forEach(s)},v=function(){return Promise.resolve().then(f)};v(),r={push:function(p){c.push(p),v()},filter:function(p){return c=c.filter(p),r}}}};return o}function At(e){e===void 0&&(e={});var t=Tt(null);return t.options=N({async:!0,ssr:!1},e),t}var Re=function(e){var t=e.sideCar,r=Se(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return l.createElement(n,N({},r))};Re.isSideCarExport=!0;function Pt(e,t){return e.useMedium(t),Re}var _e=At(),te=function(){},z=l.forwardRef(function(e,t){var r=l.useRef(null),n=l.useState({onScrollCapture:te,onWheelCapture:te,onTouchMoveCapture:te}),o=n[0],s=n[1],c=e.forwardProps,i=e.children,f=e.className,v=e.removeScrollBar,p=e.enabled,d=e.shards,g=e.sideCar,x=e.noRelative,E=e.noIsolation,u=e.inert,m=e.allowPinchZoom,h=e.as,y=h===void 0?"div":h,b=e.gapMode,w=Se(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=g,D=_t([r,t]),S=N(N({},w),o);return l.createElement(l.Fragment,null,p&&l.createElement(j,{sideCar:_e,removeScrollBar:v,shards:d,noRelative:x,noIsolation:E,inert:u,setCallbacks:s,allowPinchZoom:!!m,lockRef:r,gapMode:b}),c?l.cloneElement(l.Children.only(i),N(N({},S),{ref:D})):l.createElement(y,N({},S,{className:f,ref:D}),i))});z.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};z.classNames={fullWidth:H,zeroRight:V};var Ot=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function It(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ot();return t&&e.setAttribute("nonce",t),e}function Mt(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kt(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ft=function(){var e=0,t=null;return{add:function(r){e==0&&(t=It())&&(Mt(t,r),kt(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Lt=function(){var e=Ft();return function(t,r){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},De=function(){var e=Lt(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},Wt={left:0,top:0,right:0,gap:0},re=function(e){return parseInt(e||"",10)||0},Bt=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[re(r),re(n),re(o)]},$t=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Wt;var t=Bt(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Vt=De(),I="data-scroll-locked",Ht=function(e,t,r,n){var o=e.left,s=e.top,c=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Ct,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(i,"px ").concat(n,`;
  }
  body[`).concat(I,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(V,` {
    right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(H,` {
    margin-right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(V," .").concat(V,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(H," .").concat(H,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(I,`] {
    `).concat(Nt,": ").concat(i,`px;
  }
`)},xe=function(){var e=parseInt(document.body.getAttribute(I)||"0",10);return isFinite(e)?e:0},Ut=function(){l.useEffect(function(){return document.body.setAttribute(I,(xe()+1).toString()),function(){var e=xe()-1;e<=0?document.body.removeAttribute(I):document.body.setAttribute(I,e.toString())}},[])},Kt=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;Ut();var s=l.useMemo(function(){return $t(o)},[o]);return l.createElement(Vt,{styles:Ht(s,!t,o,r?"":"!important")})},oe=!1;if(typeof window<"u")try{var L=Object.defineProperty({},"passive",{get:function(){return oe=!0,!0}});window.addEventListener("test",L,L),window.removeEventListener("test",L,L)}catch{oe=!1}var T=oe?{passive:!1}:!1,Yt=function(e){return e.tagName==="TEXTAREA"},Te=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Yt(e)&&r[t]==="visible")},Gt=function(e){return Te(e,"overflowY")},zt=function(e){return Te(e,"overflowX")},ye=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=Ae(e,n);if(o){var s=Pe(e,n),c=s[1],i=s[2];if(c>i)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Xt=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Zt=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Ae=function(e,t){return e==="v"?Gt(t):zt(t)},Pe=function(e,t){return e==="v"?Xt(t):Zt(t)},qt=function(e,t){return e==="h"&&t==="rtl"?-1:1},Qt=function(e,t,r,n,o){var s=qt(e,window.getComputedStyle(t).direction),c=s*n,i=r.target,f=t.contains(i),v=!1,p=c>0,d=0,g=0;do{if(!i)break;var x=Pe(e,i),E=x[0],u=x[1],m=x[2],h=u-m-s*E;(E||h)&&Ae(e,i)&&(d+=h,g+=E);var y=i.parentNode;i=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!f&&i!==document.body||f&&(t.contains(i)||t===i));return(p&&Math.abs(d)<1||!p&&Math.abs(g)<1)&&(v=!0),v},W=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},be=function(e){return[e.deltaX,e.deltaY]},we=function(e){return e&&"current"in e?e.current:e},Jt=function(e,t){return e[0]===t[0]&&e[1]===t[1]},er=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tr=0,A=[];function rr(e){var t=l.useRef([]),r=l.useRef([0,0]),n=l.useRef(),o=l.useState(tr++)[0],s=l.useState(De)[0],c=l.useRef(e);l.useEffect(function(){c.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var u=Et([e.lockRef.current],(e.shards||[]).map(we),!0).filter(Boolean);return u.forEach(function(m){return m.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),u.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var i=l.useCallback(function(u,m){if("touches"in u&&u.touches.length===2||u.type==="wheel"&&u.ctrlKey)return!c.current.allowPinchZoom;var h=W(u),y=r.current,b="deltaX"in u?u.deltaX:y[0]-h[0],w="deltaY"in u?u.deltaY:y[1]-h[1],j,D=u.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in u&&S==="h"&&D.type==="range")return!1;var F=ye(S,D);if(!F)return!0;if(F?j=S:(j=S==="v"?"h":"v",F=ye(S,D)),!F)return!1;if(!n.current&&"changedTouches"in u&&(b||w)&&(n.current=j),!j)return!0;var ue=n.current||j;return Qt(ue,m,u,ue==="h"?b:w)},[]),f=l.useCallback(function(u){var m=u;if(!(!A.length||A[A.length-1]!==s)){var h="deltaY"in m?be(m):W(m),y=t.current.filter(function(j){return j.name===m.type&&(j.target===m.target||m.target===j.shadowParent)&&Jt(j.delta,h)})[0];if(y&&y.should){m.cancelable&&m.preventDefault();return}if(!y){var b=(c.current.shards||[]).map(we).filter(Boolean).filter(function(j){return j.contains(m.target)}),w=b.length>0?i(m,b[0]):!c.current.noIsolation;w&&m.cancelable&&m.preventDefault()}}},[]),v=l.useCallback(function(u,m,h,y){var b={name:u,delta:m,target:h,should:y,shadowParent:nr(h)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),p=l.useCallback(function(u){r.current=W(u),n.current=void 0},[]),d=l.useCallback(function(u){v(u.type,be(u),u.target,i(u,e.lockRef.current))},[]),g=l.useCallback(function(u){v(u.type,W(u),u.target,i(u,e.lockRef.current))},[]);l.useEffect(function(){return A.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:g}),document.addEventListener("wheel",f,T),document.addEventListener("touchmove",f,T),document.addEventListener("touchstart",p,T),function(){A=A.filter(function(u){return u!==s}),document.removeEventListener("wheel",f,T),document.removeEventListener("touchmove",f,T),document.removeEventListener("touchstart",p,T)}},[]);var x=e.removeScrollBar,E=e.inert;return l.createElement(l.Fragment,null,E?l.createElement(s,{styles:er(o)}):null,x?l.createElement(Kt,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function nr(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ar=Pt(_e,rr);var Oe=l.forwardRef(function(e,t){return l.createElement(z,N({},e,{ref:t,sideCar:ar}))});Oe.classNames=z.classNames;var or=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},P=new WeakMap,B=new WeakMap,$={},ne=0,Ie=function(e){return e&&(e.host||Ie(e.parentNode))},sr=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Ie(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ir=function(e,t,r,n){var o=sr(t,Array.isArray(e)?e:[e]);$[r]||($[r]=new WeakMap);var s=$[r],c=[],i=new Set,f=new Set(o),v=function(d){!d||i.has(d)||(i.add(d),v(d.parentNode))};o.forEach(v);var p=function(d){!d||f.has(d)||Array.prototype.forEach.call(d.children,function(g){if(i.has(g))p(g);else try{var x=g.getAttribute(n),E=x!==null&&x!=="false",u=(P.get(g)||0)+1,m=(s.get(g)||0)+1;P.set(g,u),s.set(g,m),c.push(g),u===1&&E&&B.set(g,!0),m===1&&g.setAttribute(r,"true"),E||g.setAttribute(n,"true")}catch(h){console.error("aria-hidden: cannot operate on ",g,h)}})};return p(t),i.clear(),ne++,function(){c.forEach(function(d){var g=P.get(d)-1,x=s.get(d)-1;P.set(d,g),s.set(d,x),g||(B.has(d)||d.removeAttribute(n),B.delete(d)),x||d.removeAttribute(r)}),ne--,ne||(P=new WeakMap,P=new WeakMap,B=new WeakMap,$={})}},lr=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=or(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live], script"))),ir(n,o,r,"aria-hidden")):function(){return null}},X="Dialog",[Me]=it(X),[cr,C]=Me(X),ke=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:s,modal:c=!0}=e,i=l.useRef(null),f=l.useRef(null),[v,p]=st({prop:n,defaultProp:o??!1,onChange:s,caller:X});return a.jsx(cr,{scope:t,triggerRef:i,contentRef:f,contentId:Z(),titleId:Z(),descriptionId:Z(),open:v,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(d=>!d),[p]),modal:c,children:r})};ke.displayName=X;var Fe="DialogTrigger",Le=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(Fe,r),s=G(t,o.triggerRef);return a.jsx(M.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ce(o.open),...n,ref:s,onClick:k(e.onClick,o.onOpenToggle)})});Le.displayName=Fe;var ie="DialogPortal",[ur,We]=Me(ie,{forceMount:void 0}),Be=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:o}=e,s=C(ie,t);return a.jsx(ur,{scope:t,forceMount:r,children:l.Children.map(n,c=>a.jsx(se,{present:r||s.open,children:a.jsx(lt,{asChild:!0,container:o,children:c})}))})};Be.displayName=ie;var K="DialogOverlay",$e=l.forwardRef((e,t)=>{const r=We(K,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=C(K,e.__scopeDialog);return s.modal?a.jsx(se,{present:n||s.open,children:a.jsx(fr,{...o,ref:t})}):null});$e.displayName=K;var dr=ct("DialogOverlay.RemoveScroll"),fr=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(K,r);return a.jsx(Oe,{as:dr,allowPinchZoom:!0,shards:[o.contentRef],children:a.jsx(M.div,{"data-state":ce(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),_="DialogContent",Ve=l.forwardRef((e,t)=>{const r=We(_,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=C(_,e.__scopeDialog);return a.jsx(se,{present:n||s.open,children:s.modal?a.jsx(vr,{...o,ref:t}):a.jsx(pr,{...o,ref:t})})});Ve.displayName=_;var vr=l.forwardRef((e,t)=>{const r=C(_,e.__scopeDialog),n=l.useRef(null),o=G(t,r.contentRef,n);return l.useEffect(()=>{const s=n.current;if(s)return lr(s)},[]),a.jsx(He,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:k(e.onCloseAutoFocus,s=>{var c;s.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:k(e.onPointerDownOutside,s=>{const c=s.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&s.preventDefault()}),onFocusOutside:k(e.onFocusOutside,s=>s.preventDefault())})}),pr=l.forwardRef((e,t)=>{const r=C(_,e.__scopeDialog),n=l.useRef(!1),o=l.useRef(!1);return a.jsx(He,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,s),s.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),s.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:s=>{var f,v;(f=e.onInteractOutside)==null||f.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=s.target;((v=r.triggerRef.current)==null?void 0:v.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),He=l.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:s,...c}=e,i=C(_,r),f=l.useRef(null),v=G(t,f);return jt(),a.jsxs(a.Fragment,{children:[a.jsx(Ce,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:s,children:a.jsx(ut,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ce(i.open),...c,ref:v,onDismiss:()=>i.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(hr,{titleId:i.titleId}),a.jsx(xr,{contentRef:f,descriptionId:i.descriptionId})]})]})}),le="DialogTitle",Ue=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(le,r);return a.jsx(M.h2,{id:o.titleId,...n,ref:t})});Ue.displayName=le;var Ke="DialogDescription",mr=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(Ke,r);return a.jsx(M.p,{id:o.descriptionId,...n,ref:t})});mr.displayName=Ke;var Ye="DialogClose",Ge=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(Ye,r);return a.jsx(M.button,{type:"button",...n,ref:t,onClick:k(e.onClick,()=>o.onOpenChange(!1))})});Ge.displayName=Ye;function ce(e){return e?"open":"closed"}var ze="DialogTitleWarning",[Gr,Xe]=dt(ze,{contentName:_,titleName:le,docsSlug:"dialog"}),hr=({titleId:e})=>{const t=Xe(ze),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},gr="DialogDescriptionWarning",xr=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Xe(gr).contentName}}.`;return l.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Ze=ke,qe=Le,Qe=Be,Je=$e,et=Ve,yr=Ue,tt=Ge,br=Symbol.for("react.lazy"),Y=ot[" use ".trim().toString()];function wr(e){return typeof e=="object"&&e!==null&&"then"in e}function rt(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===br&&"_payload"in e&&wr(e._payload)}function jr(e){const t=Er(e),r=l.forwardRef((n,o)=>{let{children:s,...c}=n;rt(s)&&typeof Y=="function"&&(s=Y(s._payload));const i=l.Children.toArray(s),f=i.find(Nr);if(f){const v=f.props.children,p=i.map(d=>d===f?l.Children.count(v)>1?l.Children.only(null):l.isValidElement(v)?v.props.children:null:d);return a.jsx(t,{...c,ref:o,children:l.isValidElement(v)?l.cloneElement(v,void 0,p):null})}return a.jsx(t,{...c,ref:o,children:s})});return r.displayName=`${e}.Slot`,r}function Er(e){const t=l.forwardRef((r,n)=>{let{children:o,...s}=r;if(rt(o)&&typeof Y=="function"&&(o=Y(o._payload)),l.isValidElement(o)){const c=Rr(o),i=Sr(s,o.props);return o.type!==l.Fragment&&(i.ref=n?ft(n,c):c),l.cloneElement(o,i)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cr=Symbol("radix.slottable");function Nr(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cr}function Sr(e,t){const r={...t};for(const n in t){const o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...i)=>{const f=s(...i);return o(...i),f}:o&&(r[n]=o):n==="style"?r[n]={...o,...s}:n==="className"&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}function Rr(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var _r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dr=_r.reduce((e,t)=>{const r=jr(`Primitive.${t}`),n=l.forwardRef((o,s)=>{const{asChild:c,...i}=o,f=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(f,{...i,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Tr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ar="VisuallyHidden",nt=l.forwardRef((e,t)=>a.jsx(Dr.span,{...e,ref:t,style:{...Tr,...e.style}}));nt.displayName=Ar;var Pr=nt;const at="grid-cols-[1.2fr_1fr_1.5fr_1fr_1fr_1fr_2.5fr_1.5fr_1.5fr_1.3fr_1.2fr]",Or=()=>{const e="flex items-center justify-center border-y-2 text-sm text-center md:px-2 md:py-3.5 lg:px-4 lg:py-7";return a.jsxs("div",{className:`grid-rows-auto grid ${at} bg-gray-100 font-bold`,children:[a.jsx("div",{className:e,children:"編號"}),a.jsx("div",{className:e,children:"部會"}),a.jsxs("div",{className:e,children:["審議日期 ",a.jsx("br",{}),"（階段）"]}),a.jsx("div",{className:e,children:"提案人"}),a.jsx("div",{className:e,children:"提案"}),a.jsx("div",{className:e,children:"審議結果"}),a.jsx("div",{className:e,children:"提案內容"}),a.jsxs("div",{className:e,children:["減列/",a.jsx("br",{})," 凍結金額"]}),a.jsx("div",{className:e,children:"預算金額"}),a.jsx("div",{className:e,children:"關心數"}),a.jsx("div",{className:e,children:"我關心這個"})]})},O=({label:e,children:t})=>a.jsxs("div",{className:"flex flex-col md:w-20 md:max-w-[138px]",children:[a.jsx("p",{className:"flex w-full items-center justify-center border-y-2 bg-white font-bold md:h-[76px] md:border-y-2 md:bg-neutral-400",children:e}),a.jsx("div",{className:"flex w-full items-center justify-start border-b-2 py-3 md:border-b-0",children:t})]}),Ir=({content:e})=>a.jsx("div",{className:"w-full py-3",children:a.jsxs("div",{className:"relative flex items-start gap-2",children:[a.jsx("p",{className:"mb-5 line-clamp-8 flex-1",children:e}),a.jsx("div",{className:"absolute right-0 bottom-0",children:a.jsxs(Ze,{children:[a.jsx(qe,{asChild:!0,children:a.jsx("button",{type:"button",className:"shrink-0 text-blue-600 hover:underline",children:"[更多]"})}),a.jsxs(Qe,{children:[a.jsx(Je,{className:"fixed inset-0 bg-black/40"}),a.jsxs(et,{className:"fixed top-1/2 left-1/2 max-h-[80vh] w-[90vw] max-w-[720px] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-white p-4 shadow-lg",children:[a.jsx(Pr,{children:a.jsx(yr,{children:"提案內容"})}),a.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:e}),a.jsx("div",{className:"mt-4 flex justify-center",children:a.jsx(tt,{asChild:!0,children:a.jsx("button",{className:"bg-brand-primary rounded px-3 py-1 text-white",children:"關閉"})})})]})]})]})})]})}),Mr=({item:e})=>{var n;const t=je(e.id),r=t?(t.react_good??0)+(t.react_angry??0)+(t.react_disappoint??0)+(t.react_whatever??0):e.totalReacts??0;return a.jsxs("div",{className:"flex flex-col md:w-full md:flex-row",children:[a.jsxs("div",{className:"md:bg-surface-subtle flex items-center justify-start gap-x-2 border-y-2 bg-neutral-400 py-2 md:min-w-16 md:flex-col md:border-y-0 md:py-0",children:[a.jsx("span",{className:"flex items-center font-bold md:flex md:h-[76px] md:border-y-2 md:bg-neutral-400 md:px-4 md:py-5",children:"編號"}),a.jsx("span",{className:"md:text-md md:bg-surface-subtle font-bold text-[#d18081] md:mt-4",children:e.id}),a.jsx(ae,{to:`/budget/${e.id}`,className:"text-brand-primary md:bg-surface-subtle ml-2 text-xs md:ml-0",children:"[查看單頁]"})]}),a.jsx(O,{label:"部會",children:e.department}),a.jsx(O,{label:"審議日期（階段）",children:`${e.date} (${e.stage})`}),a.jsx(O,{label:"提案人（連署）",children:e.proposer.split(" ").map((o,s,c)=>a.jsxs(U.Fragment,{children:[o,s<c.length-1&&a.jsx("br",{})]},s))}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_2fr_2fr] grid-rows-[76px] justify-items-center text-center",children:[a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"提案"}),a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:w-[120px] md:border-y-2 md:bg-neutral-400 md:p-0",children:"審議結果"}),a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"預算金額"}),a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"減列/凍結金額"}),a.jsx("p",{className:"w-full py-2",children:e.proposalType}),a.jsx("p",{className:"w-full py-2",children:e.proposalResult}),a.jsx("p",{className:"w-full py-2",children:e.originalAmount}),a.jsx("div",{className:"w-full py-2",children:(n=e.reducedAmount)==null?void 0:n.split(" / ").map((o,s,c)=>a.jsxs(U.Fragment,{children:[o,c.length>1&&s===0&&" /",c.length>1&&s===0&&a.jsx("br",{})]},s))})]}),a.jsx(O,{label:"提案內容",children:a.jsx(Ir,{content:e.proposalContent,itemId:e.id})}),a.jsx(O,{label:"關心數",children:r}),a.jsx(O,{label:"我要關心這個",children:a.jsx("div",{className:"mb-9 flex w-full flex-col items-center justify-center gap-y-4",children:a.jsx("div",{className:"flex w-full items-center justify-center rounded-3xl border-2 bg-white",children:a.jsx(Ee,{proposal:{id:e.id,react_angry:e.react_angry,react_disappoint:e.react_disappoint,react_good:e.react_good,react_whatever:e.react_whatever},singleButtonStyle:"max-w-[72px] text-[9px]",shouldShowCount:!1})})})})]})},kr=({item:e})=>{var f;const t=je(e.id),r=(e.react_good??0)+(e.react_angry??0)+(e.react_disappoint??0)+(e.react_whatever??0),n=t?(t.react_good??0)+(t.react_angry??0)+(t.react_disappoint??0)+(t.react_whatever??0):r||(e.totalReacts??0),o=l.useRef(null),[,,s]=vt();pt(o,()=>{s(!1)});const i=e.id;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-start justify-start pt-3 text-sm",children:[a.jsx(ae,{to:`/budget/${e.id}`,className:"text-[#d18081] hover:underline",children:e.id}),a.jsx(ae,{to:`/budget/${e.id}`,className:"text-xs text-[#3e51ff]",children:"[查看單頁]"})]}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.department}),a.jsxs("div",{className:"flex flex-col items-start justify-start pt-3 text-sm",children:[a.jsx("div",{children:e.date}),a.jsxs("div",{className:"text-gray-600",children:["(",e.stage,")"]})]}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.proposer.split(" ").map((v,p,d)=>a.jsxs(U.Fragment,{children:[v,p<d.length-1&&a.jsx("br",{})]},p))}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.proposalType}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.proposalResult}),a.jsx("div",{className:"flex items-start justify-start pt-3 text-sm",children:a.jsxs("div",{className:"relative w-full",children:[a.jsx("p",{className:"line-clamp-4",children:e.proposalContent}),a.jsxs(Ze,{children:[a.jsx(qe,{asChild:!0,children:a.jsx("button",{type:"button",className:"cursor-pointer text-xs text-blue-600 hover:underline",children:"[更多]"})}),a.jsxs(Qe,{children:[a.jsx(Je,{className:"fixed inset-0 bg-black/40"}),a.jsxs(et,{className:"fixed top-1/2 left-1/2 max-h-[80vh] w-[90vw] max-w-[720px] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-white p-4 shadow-lg",children:[a.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:e.proposalContent}),a.jsx("div",{className:"mt-4 flex justify-center",children:a.jsx(tt,{asChild:!0,children:a.jsx("button",{className:"bg-brand-primary rounded px-3 py-1 text-white",children:"關閉"})})})]})]})]})]})}),a.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:a.jsx("div",{className:"w-full py-2 text-center",children:(f=e.reducedAmount)==null?void 0:f.split(" / ").map((v,p,d)=>a.jsxs(U.Fragment,{children:[v,d.length>1&&p===0&&" /",d.length>1&&p===0&&a.jsx("br",{})]},p))})}),a.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:e.originalAmount}),a.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:n}),a.jsx("div",{className:"flex items-start justify-center pt-3",children:a.jsx(Ee,{proposal:e,displayMode:"popup"},i)})]})},zr=({data:e,isDesktop:t,className:r=""})=>t?a.jsx("div",{className:`${r} space-y-10 md:pb-10`,children:e.map(n=>a.jsxs("div",{children:[a.jsx(Or,{}),a.jsx("div",{className:`grid ${at}`,children:a.jsx(kr,{item:n})})]},n.id))}):a.jsx("div",{className:`flex flex-col ${r}`,children:e.map(n=>a.jsx(Mr,{item:n},n.id))});export{zr as default};
