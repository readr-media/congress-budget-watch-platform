import{p as e,y as A,x as g}from"./chunk-EPOLDU6W-BUbbWhPN.js";import{u as N,k as v}from"./gql-BxFV-4F3.js";import{S as F,I as m,b as k,a as O,G as U}from"./visualization.queries-thfxbE4W.js";import{c as M,f as W,g as q}from"./unfreeze-progress-CwQ6uulY.js";const c={pink:{border:"border-[#e9808e]",text:"text-[#e9808e]",bg:"bg-[#e9808e]"},blue:{border:"border-[#3e51ff]",text:"text-[#3e51ff]",bg:"bg-[#3e51ff]"}},C=r=>{if(!Number.isFinite(r))return 0;const s=Math.round(Number(r));return Math.min(100,Math.max(0,s))},_=r=>(r==null?void 0:r.trim())||"-";function D({label:r,description:s,percentage:a,color:i="pink"}){const n=c[i]??c.pink,t=_(s),o=C(a),d=_(r);return e.jsxs("div",{className:"flex h-[35px] w-full max-w-[449px] items-center gap-0",role:"status","aria-live":"polite",children:[e.jsx("div",{className:`relative flex items-center justify-center rounded-l-[8px] border-2 bg-white ${n.border} h-full min-w-[124px] px-[10px]`,children:e.jsx("p",{className:`font-['Noto_Sans_TC:Bold',sans-serif] text-[16px] font-bold ${n.text} text-nowrap`,children:d})}),e.jsx("div",{className:`relative flex items-center ${n.bg} h-full flex-1 px-4`,children:e.jsx("p",{className:"overflow-hidden w-full text-center text-[16px] font-medium text-nowrap text-ellipsis text-white",children:t})}),e.jsx("div",{className:`flex items-center justify-center ${n.bg} h-full w-[2px]`,children:e.jsx("div",{className:"h-[35px] w-[2px] bg-white"})}),e.jsx("div",{className:`flex items-center justify-center ${n.bg} h-full min-w-[79px] rounded-r-[8px] px-4`,children:e.jsxs("p",{className:"font-['Noto_Sans_TC:Bold',sans-serif] text-[20px] font-bold text-nowrap text-white",children:[o,"%"]})})]})}const P=r=>(r==null?void 0:r.trim())||"-";function Q({headerLabel:r,badges:s,headerColor:a}){var n;if(!s.length)return null;const i=c[a??((n=s[0])==null?void 0:n.color)??"blue"]??c.blue;return e.jsxs("div",{className:"flex w-full flex-col items-center pb-2",role:"status","aria-live":"polite",children:[e.jsxs("div",{className:"relative z-30 mb-[-8px] flex h-[35px] w-24 shrink-0 items-center justify-center rounded-lg bg-white p-2.5",children:[e.jsx("div",{"aria-hidden":"true",className:`pointer-events-none absolute inset-0 rounded-lg border-2 ${i.border}`}),e.jsx("p",{className:`relative shrink-0 whitespace-nowrap text-center text-sm font-bold ${i.text}`,children:P(r)})]}),s.map((t,o)=>{const d=c[t.color??"pink"]??c.pink,p=C(t.percentage);return e.jsxs("div",{className:`relative mb-[-8px] flex h-9 w-full shrink-0 items-center gap-1 rounded-lg px-3 last:mb-0 ${d.bg}`,style:{zIndex:20-o},children:[e.jsx("p",{className:"flex-1 whitespace-nowrap text-left text-sm font-medium text-white",children:P(t.description)}),e.jsx("div",{className:"flex h-9 w-0 shrink-0 items-center justify-center",children:e.jsx("div",{className:"rotate-90","aria-hidden":"true",children:e.jsx("svg",{className:"block",width:"36",height:"2",fill:"none",viewBox:"0 0 36 2",children:e.jsx("line",{stroke:"white",strokeWidth:"2",x2:"36",y1:"1",y2:"1"})})})}),e.jsxs("p",{className:"min-w-[42px] whitespace-nowrap text-right text-base font-bold text-white",children:[p,"%"]})]},`${t.label}-${o}`)})]})}const u="收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。還可透過視覺化方式瀏覽，一目暸然。除了已數位化的資料，此平台也透過群眾協力（crowdsourcing）辨識提案掃描檔，歡迎至協作區加入合作行列。",b="【持續更新】中央政府總預算案審查監督平台",w="https://readr-media.github.io/congress-budget-watch-platform/",T=`${w}image/og.png`;function Z(){return[{title:b},{property:"og:title",content:b},{name:"description",content:u},{property:"og:description",content:u},{property:"og:url",content:w},{property:"og:type",content:"website"},{property:"og:image",content:T},{property:"og:image:width",content:"2400"},{property:"og:image:height",content:"1260"},{name:"twitter:card",content:"summary_large_image"},{property:"twitter:domain",content:"readr-media.github.io"},{property:"twitter:url",content:w},{name:"twitter:title",content:b},{name:"twitter:description",content:u},{name:"twitter:image",content:T}]}const Y=()=>[{rel:"preload",as:"image",href:`${F}/image/homepage-banner.svg`,fetchpriority:"high"}],K=r=>{const s=(r??[]).map(a=>a==null?void 0:a.year).filter(a=>typeof a=="number");return s.length?s[0]:null},ee=A(function(){var j;const{data:s,isLoading:a,isError:i}=N({queryKey:k.latest(),queryFn:()=>v(O,{skip:0,take:10})}),{data:n}=N({queryKey:k.years(),queryFn:()=>v(U),staleTime:300*1e3}),t=((j=s==null?void 0:s.budgetYears)==null?void 0:j[0])??null,o=K((n==null?void 0:n.budgetYears)??null),d=o?`/all-budgets?year=${o}`:"/all-budgets",p=t==null?void 0:t.budgetProgress,E=M(p),$=W((t==null?void 0:t.year)??null,(t==null?void 0:t.dataProgress)??null),y=q((t==null?void 0:t.year)??null,(t==null?void 0:t.unfreezeProgress)??null),z={label:"最新審議進度",description:$,percentage:E,color:"pink"},S={label:"解凍進度",description:y.text,percentage:y.percentage,color:"blue"},h=[z,S],f=l=>e.jsx("div",{className:"max-w-banner -mt-1 flex w-full flex-col gap-3",children:l.map(x=>e.jsx("div",{className:`flex w-full items-center justify-center rounded-lg p-2 text-center text-sm font-medium ${x.className}`,children:x.text},x.key))}),R=f([{key:"progress-loading",text:"載入審議進度中...",className:"min-h-[60px] bg-gray-300 text-gray-600"},{key:"unfreeze-loading",text:"載入解凍進度中...",className:"min-h-[48px] bg-gray-300 text-gray-600"}]),L=f([{key:"progress-error",text:"審議進度載入失敗，請稍後再試",className:"min-h-[60px] bg-red-100 text-red-600"},{key:"unfreeze-error",text:"解凍進度載入失敗，請稍後再試",className:"min-h-[48px] bg-red-100 text-red-600"}]),B=f([{key:"progress-empty",text:"暫無審議進度資料",className:"min-h-[60px] bg-gray-300 text-gray-600"},{key:"unfreeze-empty",text:"暫無解凍進度資料",className:"min-h-[48px] bg-gray-300 text-gray-600"}]),G=()=>a?R:i?L:t?e.jsxs("div",{className:"max-w-banner -mt-1 w-full",children:[e.jsx("div",{className:"hidden flex-col gap-3 md:flex",children:h.map(l=>e.jsx(D,{...l},l.label))}),e.jsx("div",{className:"flex w-full justify-center md:hidden",children:e.jsx(Q,{headerLabel:h[0].label,headerColor:"blue",badges:h})})]}):B,I=[{label:"歷年預算",href:"/all-budgets"},{label:"最新年度預算",href:d},{label:"視覺化專區",href:"/visualization"},{label:"協作區",href:"/collaboration"}];return e.jsxs("div",{className:"bg-background flex h-full flex-col justify-between p-5 md:p-8",children:[e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("header",{className:"mb-8 text-center md:mb-12",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold text-gray-900 md:text-4xl",children:"中央政府總預算案審查監督平台"}),e.jsxs("div",{className:"relative mb-8 flex flex-col items-center justify-center",children:[e.jsx(m,{src:"/image/homepage-banner.svg",alt:"國會預算監督平台 Banner",width:380,height:189,loading:"eager",fetchPriority:"high",className:"h-auto w-full max-w-xl"}),G()]}),e.jsx("p",{className:"mx-auto max-w-2xl text-base leading-relaxed text-gray-700 md:text-lg",children:"收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。還可透過視覺化方式瀏覽，一目暸然。除了已數位化的資料，此平台也透過群眾協力（crowdsourcing）辨識提案掃描檔，歡迎至協作區加入合作行列。"})]}),e.jsx("nav",{className:"flex flex-col gap-3 md:grid md:grid-cols-2 md:gap-6 lg:grid-cols-4 lg:gap-4","aria-label":"main navigate",children:I.map(l=>e.jsx(g,{to:l.href,className:({isActive:x})=>`border-brand-accent flex min-h-[72px] w-full items-center justify-center rounded-lg border-3 px-6 py-4 text-center text-lg font-medium transition-colors ${x?"bg-brand-accent":"hover:bg-brand-accent bg-white hover:text-black"} focus:ring-brand-accent text-budget-accent focus:ring-2 focus:ring-offset-2 focus:outline-none`,children:l.label},l.label))})]}),e.jsxs("div",{className:"mt-15 flex items-center justify-center gap-x-2 md:mt-25 md:gap-x-3",children:[e.jsx(g,{to:"https://www.readr.tw/",target:"_blank",rel:"noopener noreferrer","aria-label":"Readr",children:e.jsx(m,{src:"/image/readr-logo.svg",alt:"Readr logo",width:110,height:48})}),e.jsx(g,{to:"https://www.freiheit.org/zh/taiwan",target:"_blank",rel:"noopener noreferrer","aria-label":"Friedrich Naumann Foundation",children:e.jsx(m,{src:"/image/Friedrich-Naumann-Foundation-logo.svg",alt:"Friedrich-Naumann-Foundation-logo",width:130,height:48,className:"h-auto w-[130px] md:w-50"})}),e.jsx(g,{to:"https://ccw.org.tw/",target:"_blank",rel:"noopener noreferrer","aria-label":"Citizen Congress Watch",children:e.jsx(m,{src:"/image/CCW-logo.svg",alt:"Citizen-Watch-logo",width:90,height:48})}),e.jsx(m,{src:"/image/donate-CCW-logo.svg",alt:"donate-CCW-logo",width:120,height:48})]})]})});export{ee as default,Y as links,Z as meta};
