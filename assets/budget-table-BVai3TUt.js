import{a as l,p as a,I as lt,x as oe,R as U}from"./chunk-FGUA77HG-dksgsGW9.js";import{b as ve,a as G,P as M,e as ct,c as ut,d as q,f as k,g as ie,h as dt,j as ft,D as vt,k as pt,l as mt}from"./index-C1D2B4eN.js";import{u as ht,a as gt}from"./index-BJnc-sEt.js";import"./index-BAl1NSbH.js";import{u as Ce,V as Ne}from"./VoteButtons-YZbeY7qN.js";import{d as xt}from"./helpers-uZhMkzy7.js";import"./visualization.queries-Bp5_Fv1-.js";import"./gql-Cne1VORc.js";import"./middleware-C14HdS1o.js";import"./mutation-sr7UmubI.js";var Q="focusScope.autoFocusOnMount",J="focusScope.autoFocusOnUnmount",pe={bubbles:!1,cancelable:!0},yt="FocusScope",Se=l.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...c}=e,[i,f]=l.useState(null),v=ve(o),p=ve(s),d=l.useRef(null),g=G(t,u=>f(u)),x=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(n){let u=function(b){if(x.paused||!i)return;const w=b.target;i.contains(w)?d.current=w:_(d.current,{select:!0})},m=function(b){if(x.paused||!i)return;const w=b.relatedTarget;w!==null&&(i.contains(w)||_(d.current,{select:!0}))},h=function(b){if(document.activeElement===document.body)for(const j of b)j.removedNodes.length>0&&_(i)};document.addEventListener("focusin",u),document.addEventListener("focusout",m);const y=new MutationObserver(h);return i&&y.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",u),document.removeEventListener("focusout",m),y.disconnect()}}},[n,i,x.paused]),l.useEffect(()=>{if(i){he.add(x);const u=document.activeElement;if(!i.contains(u)){const h=new CustomEvent(Q,pe);i.addEventListener(Q,v),i.dispatchEvent(h),h.defaultPrevented||(bt(Nt(Re(i)),{select:!0}),document.activeElement===u&&_(i))}return()=>{i.removeEventListener(Q,v),setTimeout(()=>{const h=new CustomEvent(J,pe);i.addEventListener(J,p),i.dispatchEvent(h),h.defaultPrevented||_(u??document.body,{select:!0}),i.removeEventListener(J,p),he.remove(x)},0)}}},[i,v,p,x]);const E=l.useCallback(u=>{if(!r&&!n||x.paused)return;const m=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,h=document.activeElement;if(m&&h){const y=u.currentTarget,[b,w]=wt(y);b&&w?!u.shiftKey&&h===w?(u.preventDefault(),r&&_(b,{select:!0})):u.shiftKey&&h===b&&(u.preventDefault(),r&&_(w,{select:!0})):h===y&&u.preventDefault()}},[r,n,x.paused]);return a.jsx(M.div,{tabIndex:-1,...c,ref:g,onKeyDown:E})});Se.displayName=yt;function bt(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(_(n,{select:t}),document.activeElement!==r)return}function wt(e){const t=Re(e),r=me(t,e),n=me(t.reverse(),e);return[r,n]}function Re(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function me(e,t){for(const r of e)if(!jt(r,{upTo:t}))return r}function jt(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Et(e){return e instanceof HTMLInputElement&&"select"in e}function _(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Et(e)&&t&&e.select()}}var he=Ct();function Ct(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=ge(e,t),e.unshift(t)},remove(t){var r;e=ge(e,t),(r=e[0])==null||r.resume()}}}function ge(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Nt(e){return e.filter(t=>t.tagName!=="A")}var ee=0;function St(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xe()),document.body.insertAdjacentElement("beforeend",e[1]??xe()),ee++,()=>{ee===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ee--}},[])}function xe(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var N=function(){return N=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},N.apply(this,arguments)};function _e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Rt(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var V="right-scroll-bar-position",H="width-before-scroll-bar",_t="with-scroll-bars-hidden",Dt="--removed-body-scroll-bar-size";function te(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Tt(e,t){var r=l.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var At=typeof window<"u"?l.useLayoutEffect:l.useEffect,ye=new WeakMap;function Pt(e,t){var r=Tt(null,function(n){return e.forEach(function(o){return te(o,n)})});return At(function(){var n=ye.get(r);if(n){var o=new Set(n),s=new Set(e),c=r.current;o.forEach(function(i){s.has(i)||te(i,null)}),s.forEach(function(i){o.has(i)||te(i,c)})}ye.set(r,e)},[e]),r}function Ot(e){return e}function It(e,t){t===void 0&&(t=Ot);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var c=t(s,n);return r.push(c),function(){r=r.filter(function(i){return i!==c})}},assignSyncMedium:function(s){for(n=!0;r.length;){var c=r;r=[],c.forEach(s)}r={push:function(i){return s(i)},filter:function(){return r}}},assignMedium:function(s){n=!0;var c=[];if(r.length){var i=r;r=[],i.forEach(s),c=r}var f=function(){var p=c;c=[],p.forEach(s)},v=function(){return Promise.resolve().then(f)};v(),r={push:function(p){c.push(p),v()},filter:function(p){return c=c.filter(p),r}}}};return o}function Mt(e){e===void 0&&(e={});var t=It(null);return t.options=N({async:!0,ssr:!1},e),t}var De=function(e){var t=e.sideCar,r=_e(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return l.createElement(n,N({},r))};De.isSideCarExport=!0;function kt(e,t){return e.useMedium(t),De}var Te=Mt(),re=function(){},z=l.forwardRef(function(e,t){var r=l.useRef(null),n=l.useState({onScrollCapture:re,onWheelCapture:re,onTouchMoveCapture:re}),o=n[0],s=n[1],c=e.forwardProps,i=e.children,f=e.className,v=e.removeScrollBar,p=e.enabled,d=e.shards,g=e.sideCar,x=e.noRelative,E=e.noIsolation,u=e.inert,m=e.allowPinchZoom,h=e.as,y=h===void 0?"div":h,b=e.gapMode,w=_e(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=g,S=Pt([r,t]),R=N(N({},w),o);return l.createElement(l.Fragment,null,p&&l.createElement(j,{sideCar:Te,removeScrollBar:v,shards:d,noRelative:x,noIsolation:E,inert:u,setCallbacks:s,allowPinchZoom:!!m,lockRef:r,gapMode:b}),c?l.cloneElement(l.Children.only(i),N(N({},R),{ref:S})):l.createElement(y,N({},R,{className:f,ref:S}),i))});z.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};z.classNames={fullWidth:H,zeroRight:V};var Ft=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Lt(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ft();return t&&e.setAttribute("nonce",t),e}function Wt(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Bt(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $t=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Lt())&&(Wt(t,r),Bt(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vt=function(){var e=$t();return function(t,r){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Ae=function(){var e=Vt(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},Ht={left:0,top:0,right:0,gap:0},ne=function(e){return parseInt(e||"",10)||0},Ut=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ne(r),ne(n),ne(o)]},Kt=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ht;var t=Ut(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Yt=Ae(),I="data-scroll-locked",Gt=function(e,t,r,n){var o=e.left,s=e.top,c=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(_t,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(i,"px ").concat(n,`;
  }
  body[`).concat(I,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(V,` {
    right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(H,` {
    margin-right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(V," .").concat(V,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(H," .").concat(H,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(I,`] {
    `).concat(Dt,": ").concat(i,`px;
  }
`)},be=function(){var e=parseInt(document.body.getAttribute(I)||"0",10);return isFinite(e)?e:0},zt=function(){l.useEffect(function(){return document.body.setAttribute(I,(be()+1).toString()),function(){var e=be()-1;e<=0?document.body.removeAttribute(I):document.body.setAttribute(I,e.toString())}},[])},Xt=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;zt();var s=l.useMemo(function(){return Kt(o)},[o]);return l.createElement(Yt,{styles:Gt(s,!t,o,r?"":"!important")})},se=!1;if(typeof window<"u")try{var L=Object.defineProperty({},"passive",{get:function(){return se=!0,!0}});window.addEventListener("test",L,L),window.removeEventListener("test",L,L)}catch{se=!1}var T=se?{passive:!1}:!1,Zt=function(e){return e.tagName==="TEXTAREA"},Pe=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Zt(e)&&r[t]==="visible")},qt=function(e){return Pe(e,"overflowY")},Qt=function(e){return Pe(e,"overflowX")},we=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=Oe(e,n);if(o){var s=Ie(e,n),c=s[1],i=s[2];if(c>i)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Jt=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},er=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Oe=function(e,t){return e==="v"?qt(t):Qt(t)},Ie=function(e,t){return e==="v"?Jt(t):er(t)},tr=function(e,t){return e==="h"&&t==="rtl"?-1:1},rr=function(e,t,r,n,o){var s=tr(e,window.getComputedStyle(t).direction),c=s*n,i=r.target,f=t.contains(i),v=!1,p=c>0,d=0,g=0;do{if(!i)break;var x=Ie(e,i),E=x[0],u=x[1],m=x[2],h=u-m-s*E;(E||h)&&Oe(e,i)&&(d+=h,g+=E);var y=i.parentNode;i=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!f&&i!==document.body||f&&(t.contains(i)||t===i));return(p&&Math.abs(d)<1||!p&&Math.abs(g)<1)&&(v=!0),v},W=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},je=function(e){return[e.deltaX,e.deltaY]},Ee=function(e){return e&&"current"in e?e.current:e},nr=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ar=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},or=0,A=[];function sr(e){var t=l.useRef([]),r=l.useRef([0,0]),n=l.useRef(),o=l.useState(or++)[0],s=l.useState(Ae)[0],c=l.useRef(e);l.useEffect(function(){c.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var u=Rt([e.lockRef.current],(e.shards||[]).map(Ee),!0).filter(Boolean);return u.forEach(function(m){return m.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),u.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var i=l.useCallback(function(u,m){if("touches"in u&&u.touches.length===2||u.type==="wheel"&&u.ctrlKey)return!c.current.allowPinchZoom;var h=W(u),y=r.current,b="deltaX"in u?u.deltaX:y[0]-h[0],w="deltaY"in u?u.deltaY:y[1]-h[1],j,S=u.target,R=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in u&&R==="h"&&S.type==="range")return!1;var de=window.getSelection(),Z=de&&de.anchorNode,it=Z?Z===S||Z.contains(S):!1;if(it)return!1;var F=we(R,S);if(!F)return!0;if(F?j=R:(j=R==="v"?"h":"v",F=we(R,S)),!F)return!1;if(!n.current&&"changedTouches"in u&&(b||w)&&(n.current=j),!j)return!0;var fe=n.current||j;return rr(fe,m,u,fe==="h"?b:w)},[]),f=l.useCallback(function(u){var m=u;if(!(!A.length||A[A.length-1]!==s)){var h="deltaY"in m?je(m):W(m),y=t.current.filter(function(j){return j.name===m.type&&(j.target===m.target||m.target===j.shadowParent)&&nr(j.delta,h)})[0];if(y&&y.should){m.cancelable&&m.preventDefault();return}if(!y){var b=(c.current.shards||[]).map(Ee).filter(Boolean).filter(function(j){return j.contains(m.target)}),w=b.length>0?i(m,b[0]):!c.current.noIsolation;w&&m.cancelable&&m.preventDefault()}}},[]),v=l.useCallback(function(u,m,h,y){var b={name:u,delta:m,target:h,should:y,shadowParent:ir(h)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),p=l.useCallback(function(u){r.current=W(u),n.current=void 0},[]),d=l.useCallback(function(u){v(u.type,je(u),u.target,i(u,e.lockRef.current))},[]),g=l.useCallback(function(u){v(u.type,W(u),u.target,i(u,e.lockRef.current))},[]);l.useEffect(function(){return A.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:g}),document.addEventListener("wheel",f,T),document.addEventListener("touchmove",f,T),document.addEventListener("touchstart",p,T),function(){A=A.filter(function(u){return u!==s}),document.removeEventListener("wheel",f,T),document.removeEventListener("touchmove",f,T),document.removeEventListener("touchstart",p,T)}},[]);var x=e.removeScrollBar,E=e.inert;return l.createElement(l.Fragment,null,E?l.createElement(s,{styles:ar(o)}):null,x?l.createElement(Xt,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ir(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const lr=kt(Te,sr);var Me=l.forwardRef(function(e,t){return l.createElement(z,N({},e,{ref:t,sideCar:lr}))});Me.classNames=z.classNames;var cr=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},P=new WeakMap,B=new WeakMap,$={},ae=0,ke=function(e){return e&&(e.host||ke(e.parentNode))},ur=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=ke(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},dr=function(e,t,r,n){var o=ur(t,Array.isArray(e)?e:[e]);$[r]||($[r]=new WeakMap);var s=$[r],c=[],i=new Set,f=new Set(o),v=function(d){!d||i.has(d)||(i.add(d),v(d.parentNode))};o.forEach(v);var p=function(d){!d||f.has(d)||Array.prototype.forEach.call(d.children,function(g){if(i.has(g))p(g);else try{var x=g.getAttribute(n),E=x!==null&&x!=="false",u=(P.get(g)||0)+1,m=(s.get(g)||0)+1;P.set(g,u),s.set(g,m),c.push(g),u===1&&E&&B.set(g,!0),m===1&&g.setAttribute(r,"true"),E||g.setAttribute(n,"true")}catch(h){console.error("aria-hidden: cannot operate on ",g,h)}})};return p(t),i.clear(),ae++,function(){c.forEach(function(d){var g=P.get(d)-1,x=s.get(d)-1;P.set(d,g),s.set(d,x),g||(B.has(d)||d.removeAttribute(n),B.delete(d)),x||d.removeAttribute(r)}),ae--,ae||(P=new WeakMap,P=new WeakMap,B=new WeakMap,$={})}},fr=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=cr(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live], script"))),dr(n,o,r,"aria-hidden")):function(){return null}},X="Dialog",[Fe]=ut(X),[vr,C]=Fe(X),Le=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:s,modal:c=!0}=e,i=l.useRef(null),f=l.useRef(null),[v,p]=ct({prop:n,defaultProp:o??!1,onChange:s,caller:X});return a.jsx(vr,{scope:t,triggerRef:i,contentRef:f,contentId:q(),titleId:q(),descriptionId:q(),open:v,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(d=>!d),[p]),modal:c,children:r})};Le.displayName=X;var We="DialogTrigger",Be=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(We,r),s=G(t,o.triggerRef);return a.jsx(M.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ue(o.open),...n,ref:s,onClick:k(e.onClick,o.onOpenToggle)})});Be.displayName=We;var le="DialogPortal",[pr,$e]=Fe(le,{forceMount:void 0}),Ve=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:o}=e,s=C(le,t);return a.jsx(pr,{scope:t,forceMount:r,children:l.Children.map(n,c=>a.jsx(ie,{present:r||s.open,children:a.jsx(dt,{asChild:!0,container:o,children:c})}))})};Ve.displayName=le;var K="DialogOverlay",He=l.forwardRef((e,t)=>{const r=$e(K,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=C(K,e.__scopeDialog);return s.modal?a.jsx(ie,{present:n||s.open,children:a.jsx(hr,{...o,ref:t})}):null});He.displayName=K;var mr=ft("DialogOverlay.RemoveScroll"),hr=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(K,r);return a.jsx(Me,{as:mr,allowPinchZoom:!0,shards:[o.contentRef],children:a.jsx(M.div,{"data-state":ue(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),D="DialogContent",Ue=l.forwardRef((e,t)=>{const r=$e(D,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=C(D,e.__scopeDialog);return a.jsx(ie,{present:n||s.open,children:s.modal?a.jsx(gr,{...o,ref:t}):a.jsx(xr,{...o,ref:t})})});Ue.displayName=D;var gr=l.forwardRef((e,t)=>{const r=C(D,e.__scopeDialog),n=l.useRef(null),o=G(t,r.contentRef,n);return l.useEffect(()=>{const s=n.current;if(s)return fr(s)},[]),a.jsx(Ke,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:k(e.onCloseAutoFocus,s=>{var c;s.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:k(e.onPointerDownOutside,s=>{const c=s.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&s.preventDefault()}),onFocusOutside:k(e.onFocusOutside,s=>s.preventDefault())})}),xr=l.forwardRef((e,t)=>{const r=C(D,e.__scopeDialog),n=l.useRef(!1),o=l.useRef(!1);return a.jsx(Ke,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,s),s.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),s.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:s=>{var f,v;(f=e.onInteractOutside)==null||f.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=s.target;((v=r.triggerRef.current)==null?void 0:v.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Ke=l.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:s,...c}=e,i=C(D,r),f=l.useRef(null),v=G(t,f);return St(),a.jsxs(a.Fragment,{children:[a.jsx(Se,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:s,children:a.jsx(vt,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ue(i.open),...c,ref:v,onDismiss:()=>i.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(br,{titleId:i.titleId}),a.jsx(jr,{contentRef:f,descriptionId:i.descriptionId})]})]})}),ce="DialogTitle",Ye=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(ce,r);return a.jsx(M.h2,{id:o.titleId,...n,ref:t})});Ye.displayName=ce;var Ge="DialogDescription",yr=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(Ge,r);return a.jsx(M.p,{id:o.descriptionId,...n,ref:t})});yr.displayName=Ge;var ze="DialogClose",Xe=l.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=C(ze,r);return a.jsx(M.button,{type:"button",...n,ref:t,onClick:k(e.onClick,()=>o.onOpenChange(!1))})});Xe.displayName=ze;function ue(e){return e?"open":"closed"}var Ze="DialogTitleWarning",[qr,qe]=pt(Ze,{contentName:D,titleName:ce,docsSlug:"dialog"}),br=({titleId:e})=>{const t=qe(Ze),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},wr="DialogDescriptionWarning",jr=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qe(wr).contentName}}.`;return l.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Qe=Le,Je=Be,et=Ve,tt=He,rt=Ue,Er=Ye,nt=Xe,Cr=Symbol.for("react.lazy"),Y=lt[" use ".trim().toString()];function Nr(e){return typeof e=="object"&&e!==null&&"then"in e}function at(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Cr&&"_payload"in e&&Nr(e._payload)}function Sr(e){const t=Rr(e),r=l.forwardRef((n,o)=>{let{children:s,...c}=n;at(s)&&typeof Y=="function"&&(s=Y(s._payload));const i=l.Children.toArray(s),f=i.find(Dr);if(f){const v=f.props.children,p=i.map(d=>d===f?l.Children.count(v)>1?l.Children.only(null):l.isValidElement(v)?v.props.children:null:d);return a.jsx(t,{...c,ref:o,children:l.isValidElement(v)?l.cloneElement(v,void 0,p):null})}return a.jsx(t,{...c,ref:o,children:s})});return r.displayName=`${e}.Slot`,r}function Rr(e){const t=l.forwardRef((r,n)=>{let{children:o,...s}=r;if(at(o)&&typeof Y=="function"&&(o=Y(o._payload)),l.isValidElement(o)){const c=Ar(o),i=Tr(s,o.props);return o.type!==l.Fragment&&(i.ref=n?mt(n,c):c),l.cloneElement(o,i)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _r=Symbol("radix.slottable");function Dr(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_r}function Tr(e,t){const r={...t};for(const n in t){const o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...i)=>{const f=s(...i);return o(...i),f}:o&&(r[n]=o):n==="style"?r[n]={...o,...s}:n==="className"&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}function Ar(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Pr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Or=Pr.reduce((e,t)=>{const r=Sr(`Primitive.${t}`),n=l.forwardRef((o,s)=>{const{asChild:c,...i}=o,f=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(f,{...i,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Ir=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Mr="VisuallyHidden",ot=l.forwardRef((e,t)=>a.jsx(Or.span,{...e,ref:t,style:{...Ir,...e.style}}));ot.displayName=Mr;var kr=ot;const st="grid-cols-[1.2fr_1fr_1.5fr_1fr_1fr_1fr_2.5fr_1.5fr_1.5fr_1.3fr_1.2fr]",Fr=()=>{const e="flex items-center justify-center border-y-2 text-sm text-center md:px-2 md:py-3.5 lg:px-4 lg:py-7";return a.jsxs("div",{className:`grid-rows-auto grid ${st} bg-gray-100 font-bold`,children:[a.jsx("div",{className:e,children:"編號"}),a.jsx("div",{className:e,children:"部會"}),a.jsxs("div",{className:e,children:["審議日期 ",a.jsx("br",{}),"（階段）"]}),a.jsx("div",{className:e,children:"提案人"}),a.jsx("div",{className:e,children:"提案"}),a.jsx("div",{className:e,children:"審議結果"}),a.jsx("div",{className:e,children:"提案內容"}),a.jsxs("div",{className:e,children:["減列/",a.jsx("br",{})," 凍結金額"]}),a.jsx("div",{className:e,children:"預算金額"}),a.jsx("div",{className:e,children:"關心數"}),a.jsx("div",{className:e,children:"我關心這個"})]})},O=({label:e,children:t})=>a.jsxs("div",{className:"flex flex-col md:w-20 md:max-w-[138px]",children:[a.jsx("p",{className:"flex w-full items-center justify-center border-y-2 bg-white font-bold md:h-[76px] md:border-y-2 md:bg-neutral-400",children:e}),a.jsx("div",{className:"flex w-full items-center justify-start border-b-2 py-3 md:border-b-0",children:t})]}),Lr=({content:e})=>a.jsx("div",{className:"w-full py-3",children:a.jsxs("div",{className:"relative flex items-start gap-2",children:[a.jsx("p",{className:"mb-5 line-clamp-8 flex-1",children:e}),a.jsx("div",{className:"absolute right-0 bottom-0",children:a.jsxs(Qe,{children:[a.jsx(Je,{asChild:!0,children:a.jsx("button",{type:"button",className:"shrink-0 text-blue-600 hover:underline",children:"[更多]"})}),a.jsxs(et,{children:[a.jsx(tt,{className:"fixed inset-0 bg-black/40"}),a.jsxs(rt,{className:"fixed top-1/2 left-1/2 max-h-[80vh] w-[90vw] max-w-[720px] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-white p-4 shadow-lg",children:[a.jsx(kr,{children:a.jsx(Er,{children:"提案內容"})}),a.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:e}),a.jsx("div",{className:"mt-4 flex justify-center",children:a.jsx(nt,{asChild:!0,children:a.jsx("button",{className:"bg-brand-primary rounded px-3 py-1 text-white",children:"關閉"})})})]})]})]})})]})}),Wr=({item:e})=>{var n;const t=Ce(e.id),r=t?(t.react_good??0)+(t.react_angry??0)+(t.react_disappoint??0)+(t.react_whatever??0):e.totalReacts??0;return a.jsxs("div",{className:"flex flex-col md:w-full md:flex-row",children:[a.jsxs("div",{className:"md:bg-surface-subtle flex items-center justify-start gap-x-2 border-y-2 bg-neutral-400 py-2 md:min-w-16 md:flex-col md:border-y-0 md:py-0",children:[a.jsx("span",{className:"flex items-center font-bold md:flex md:h-[76px] md:border-y-2 md:bg-neutral-400 md:px-4 md:py-5",children:"編號"}),a.jsx("span",{className:"md:text-md md:bg-surface-subtle font-bold text-[#d18081] md:mt-4",children:e.id}),a.jsx(oe,{to:`/budget/${e.id}`,className:"text-brand-primary md:bg-surface-subtle ml-2 text-xs md:ml-0",children:"[查看單頁]"})]}),a.jsx(O,{label:"部會",children:e.department}),a.jsx(O,{label:"審議日期（階段）",children:`${e.date} (${e.stage})`}),a.jsx(O,{label:"提案人（連署）",children:e.proposer.split(" ").map((o,s,c)=>a.jsxs(U.Fragment,{children:[o,s<c.length-1&&a.jsx("br",{})]},s))}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_2fr_2fr] grid-rows-[76px] justify-items-center text-center",children:[a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"提案"}),a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:w-[120px] md:border-y-2 md:bg-neutral-400 md:p-0",children:"審議結果"}),a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"預算金額"}),a.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"減列/凍結金額"}),a.jsx("p",{className:"w-full py-2",children:e.proposalType}),a.jsx("p",{className:"w-full py-2",children:xt(e.proposalResult)}),a.jsx("p",{className:"w-full py-2",children:e.originalAmount}),a.jsx("div",{className:"w-full py-2",children:(n=e.reducedAmount)==null?void 0:n.split(" / ").map((o,s,c)=>a.jsxs(U.Fragment,{children:[o,c.length>1&&s===0&&" /",c.length>1&&s===0&&a.jsx("br",{})]},s))})]}),a.jsx(O,{label:"提案內容",children:a.jsx(Lr,{content:e.proposalContent,itemId:e.id})}),a.jsx(O,{label:"關心數",children:r}),a.jsx(O,{label:"我要關心這個",children:a.jsx("div",{className:"mb-9 flex w-full flex-col items-center justify-center gap-y-4",children:a.jsx("div",{className:"flex w-full items-center justify-center rounded-3xl border-2 bg-white",children:a.jsx(Ne,{proposal:{id:e.id,react_angry:e.react_angry,react_disappoint:e.react_disappoint,react_good:e.react_good,react_whatever:e.react_whatever},singleButtonStyle:"max-w-[72px] text-[9px]",shouldShowCount:!1})})})})]})},Br=({item:e})=>{var f;const t=Ce(e.id),r=(e.react_good??0)+(e.react_angry??0)+(e.react_disappoint??0)+(e.react_whatever??0),n=t?(t.react_good??0)+(t.react_angry??0)+(t.react_disappoint??0)+(t.react_whatever??0):r||(e.totalReacts??0),o=l.useRef(null),[,,s]=ht();gt(o,()=>{s(!1)});const i=e.id;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-start justify-start pt-3 text-sm",children:[a.jsx(oe,{to:`/budget/${e.id}`,className:"text-[#d18081] hover:underline",children:e.id}),a.jsx(oe,{to:`/budget/${e.id}`,className:"text-xs text-[#3e51ff]",children:"[查看單頁]"})]}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.department}),a.jsxs("div",{className:"flex flex-col items-start justify-start pt-3 text-sm",children:[a.jsx("div",{children:e.date}),a.jsxs("div",{className:"text-gray-600",children:["(",e.stage,")"]})]}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.proposer.split(" ").map((v,p,d)=>a.jsxs(U.Fragment,{children:[v,p<d.length-1&&a.jsx("br",{})]},p))}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.proposalType}),a.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:e.proposalResult}),a.jsx("div",{className:"flex items-start justify-start pt-3 text-sm",children:a.jsxs("div",{className:"relative w-full",children:[a.jsx("p",{className:"line-clamp-4",children:e.proposalContent}),a.jsxs(Qe,{children:[a.jsx(Je,{asChild:!0,children:a.jsx("button",{type:"button",className:"cursor-pointer text-xs text-blue-600 hover:underline",children:"[更多]"})}),a.jsxs(et,{children:[a.jsx(tt,{className:"fixed inset-0 bg-black/40"}),a.jsxs(rt,{className:"fixed top-1/2 left-1/2 max-h-[80vh] w-[90vw] max-w-[720px] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-white p-4 shadow-lg",children:[a.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:e.proposalContent}),a.jsx("div",{className:"mt-4 flex justify-center",children:a.jsx(nt,{asChild:!0,children:a.jsx("button",{className:"bg-brand-primary rounded px-3 py-1 text-white",children:"關閉"})})})]})]})]})]})}),a.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:a.jsx("div",{className:"w-full py-2 text-center",children:(f=e.reducedAmount)==null?void 0:f.split(" / ").map((v,p,d)=>a.jsxs(U.Fragment,{children:[v,d.length>1&&p===0&&" /",d.length>1&&p===0&&a.jsx("br",{})]},p))})}),a.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:e.originalAmount}),a.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:n}),a.jsx("div",{className:"flex items-start justify-center pt-3",children:a.jsx(Ne,{proposal:e,displayMode:"popup"},i)})]})},Qr=({data:e,isDesktop:t,className:r=""})=>t?a.jsx("div",{className:`${r} space-y-10 md:pb-10`,children:e.map(n=>a.jsxs("div",{children:[a.jsx(Fr,{}),a.jsx("div",{className:`grid ${st}`,children:a.jsx(Br,{item:n})})]},n.id))}):a.jsx("div",{className:`flex flex-col ${r}`,children:e.map(n=>a.jsx(Wr,{item:n},n.id))});export{Qr as default};
