import{P as s}from"./gql-BsaTxBGS.js";const c={budget_review:"預算審議",budget_unfreeze:"預算解凍"};function m(t,n="階段"){return t?c[t]??n:n}const h={[s.Freeze]:"凍結",[s.Reduce]:"減列",[s.Other]:"主決議"},D={passed:"通過",rejected:"不通過",pending:"待審議",reserved:"保留",withdrawn:"撤案"};function z(t){const n=(t??[]).filter(r=>!!r);return n.length===0?"未分類":n.map(r=>h[r]??r).join("、")}function B(t){if(!t)return"待審議";const n=t.trim().toLowerCase();return D[n]||t}function d(t){if(t==null)return"無預算金額";if(t===0)return"0";if(Math.abs(t)<1e4)return t.toLocaleString("zh-TW");const n=(i,f)=>{const a=i.toFixed(1);return`${a.endsWith(".0")?a.slice(0,-2):a} ${f}`},r=t/1e8;if(Math.abs(r)>=1)return n(r,"億");const e=t/1e4;return n(e,"萬")}function y(t,n){const r=t?d(t):"0",e=n?d(n):"0";return r==="0"&&e==="0"?"0":`${r} / ${e}`}function T(t){if(!t)return null;if(t instanceof Date)return t;const n=new Date(t);return Number.isNaN(n.getTime())?null:n}function l(t,n="會議"){const r=(t??[]).filter(e=>!!e).map(e=>({committee:e,startDate:T(e.startDate)})).filter(e=>!!e.startDate).reduce((e,i)=>e?i.startDate.getTime()>e.startDate.getTime()?i:e:i,null);return r?r.committee.name??r.committee.displayName??n:n}function R(t,n){if(!t||t.length===0)return[];const r=new Map;return(n??[]).forEach(e=>{e!=null&&e.id&&(e.meetings??[]).forEach(i=>{i!=null&&i.id&&r.set(i.id,e.id)})}),t.map((e,i)=>({id:e.id||i,date:e.meetingDate?new Date(e.meetingDate).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}):"日期未定",title:l(e.committee,m(e.type,"會議")),historicalProposalId:e.id?r.get(e.id):void 0,description:e.description||e.location||""}))}function b(t,n,r){const e=[];return n!=null&&n.id?e.push({raw:n,isParent:!0}):r!=null&&r.id&&((t==null?void 0:t.length)??0)>0&&e.push({raw:r,isParent:!0}),t&&t.length>0&&t.forEach(i=>{i!=null&&i.id&&e.push({raw:i,isParent:!1})}),e.length===0?[]:e.map(({raw:i,isParent:f},a)=>{var o;return{id:(i==null?void 0:i.id)??`unknown-${a}`,date:"2025/08/01",proposers:((o=i==null?void 0:i.proposers)==null?void 0:o.map(u=>u==null?void 0:u.name).filter(Boolean).join("、"))||"未知",isParent:f}})}function g(t,n,r){const e=[t,n,r].filter(Boolean);return e.length===0?"暫無科目計畫":e.join(" > ")}function E(t){var e,i;if(!t)return!1;const n=!!((e=t.mergedParentProposals)!=null&&e.id),r=(((i=t.mergedProposals)==null?void 0:i.length)??0)>0;return n||r}function S(t){var n;return t?!!((n=t.historicalParentProposals)!=null&&n.id):!1}export{D as P,y as a,R as b,b as c,B as d,g as e,d as f,z as g,E as h,S as i,m};
