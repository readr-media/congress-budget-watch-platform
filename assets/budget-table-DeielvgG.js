import{a as i,I as $,p as e,x as j,R as u}from"./chunk-WWGJGFF6-C1k8rglg.js";import{R as y,T as b,P as g,O as v,C as N,b as w,a as T}from"./index-D1ht_Y6-.js";import{u as O,a as P}from"./index-DrVPcFH7.js";import"./index-SkmILjJ3.js";import{j as V}from"./index-oE16HA7V.js";import{u as _,V as C}from"./VoteButtons-CPWQknyN.js";import{d as A}from"./helpers-DAjGluMj.js";import"./visualization.queries-BwJN6T7Z.js";import"./gql-BN5l4yyr.js";import"./middleware-BA_Oq8-J.js";import"./mutation-BvWU_GRy.js";var D=Symbol.for("react.lazy"),h=$[" use ".trim().toString()];function k(s){return typeof s=="object"&&s!==null&&"then"in s}function R(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===D&&"_payload"in s&&k(s._payload)}function I(s){const t=L(s),a=i.forwardRef((r,l)=>{let{children:n,...d}=r;R(n)&&typeof h=="function"&&(n=h(n._payload));const o=i.Children.toArray(n),c=o.find(z);if(c){const p=c.props.children,x=o.map(m=>m===c?i.Children.count(p)>1?i.Children.only(null):i.isValidElement(p)?p.props.children:null:m);return e.jsx(t,{...d,ref:l,children:i.isValidElement(p)?i.cloneElement(p,void 0,x):null})}return e.jsx(t,{...d,ref:l,children:n})});return a.displayName=`${s}.Slot`,a}function L(s){const t=i.forwardRef((a,r)=>{let{children:l,...n}=a;if(R(l)&&typeof h=="function"&&(l=h(l._payload)),i.isValidElement(l)){const d=H(l),o=B(n,l.props);return l.type!==i.Fragment&&(o.ref=r?V(r,d):d),i.cloneElement(l,o)}return i.Children.count(l)>1?i.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var F=Symbol("radix.slottable");function z(s){return i.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===F}function B(s,t){const a={...t};for(const r in t){const l=s[r],n=t[r];/^on[A-Z]/.test(r)?l&&n?a[r]=(...o)=>{const c=n(...o);return l(...o),c}:l&&(a[r]=l):r==="style"?a[r]={...l,...n}:r==="className"&&(a[r]=[l,n].filter(Boolean).join(" "))}return{...s,...a}}function H(s){var r,l;let t=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?s.ref:(t=(l=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:l.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?s.props.ref:s.props.ref||s.ref)}var M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],W=M.reduce((s,t)=>{const a=I(`Primitive.${t}`),r=i.forwardRef((l,n)=>{const{asChild:d,...o}=l,c=d?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:n})});return r.displayName=`Primitive.${t}`,{...s,[t]:r}},{}),Y=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),K="VisuallyHidden",S=i.forwardRef((s,t)=>e.jsx(W.span,{...s,ref:t,style:{...Y,...s.style}}));S.displayName=K;var Z=S;const E="grid-cols-[1.2fr_1fr_1.5fr_1fr_1fr_1fr_2.5fr_1.5fr_1.5fr_1.3fr_1.2fr]",G=()=>{const s="flex items-center justify-center border-y-2 text-sm text-center md:px-2 md:py-3.5 lg:px-4 lg:py-7";return e.jsxs("div",{className:`grid-rows-auto grid ${E} bg-gray-100 font-bold`,children:[e.jsx("div",{className:s,children:"編號"}),e.jsx("div",{className:s,children:"部會"}),e.jsxs("div",{className:s,children:["審議日期 ",e.jsx("br",{}),"（階段）"]}),e.jsx("div",{className:s,children:"提案人"}),e.jsx("div",{className:s,children:"提案"}),e.jsx("div",{className:s,children:"審議結果"}),e.jsx("div",{className:s,children:"提案內容"}),e.jsxs("div",{className:s,children:["減列/",e.jsx("br",{})," 凍結金額"]}),e.jsx("div",{className:s,children:"預算金額"}),e.jsx("div",{className:s,children:"關心數"}),e.jsx("div",{className:s,children:"我關心這個"})]})},f=({label:s,children:t})=>e.jsxs("div",{className:"flex flex-col md:w-20 md:max-w-[138px]",children:[e.jsx("p",{className:"flex w-full items-center justify-center border-y-2 bg-white font-bold md:h-[76px] md:border-y-2 md:bg-neutral-400",children:s}),e.jsx("div",{className:"flex w-full items-center justify-start border-b-2 py-3 md:border-b-0",children:t})]}),U=({content:s})=>e.jsx("div",{className:"w-full py-3",children:e.jsxs("div",{className:"relative flex items-start gap-2",children:[e.jsx("p",{className:"mb-5 line-clamp-8 flex-1",children:s}),e.jsx("div",{className:"absolute right-0 bottom-0",children:e.jsxs(y,{children:[e.jsx(b,{asChild:!0,children:e.jsx("button",{type:"button",className:"shrink-0 text-blue-600 hover:underline",children:"[更多]"})}),e.jsxs(g,{children:[e.jsx(v,{className:"fixed inset-0 bg-black/40"}),e.jsxs(N,{className:"fixed top-1/2 left-1/2 max-h-[80vh] w-[90vw] max-w-[720px] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-white p-4 shadow-lg",children:[e.jsx(Z,{children:e.jsx(T,{children:"提案內容"})}),e.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:s}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(w,{asChild:!0,children:e.jsx("button",{className:"bg-brand-primary rounded px-3 py-1 text-white",children:"關閉"})})})]})]})]})})]})}),q=({item:s})=>{var r;const t=_(s.id),a=t?(t.react_good??0)+(t.react_angry??0)+(t.react_disappoint??0)+(t.react_whatever??0):s.totalReacts??0;return e.jsxs("div",{className:"flex flex-col md:w-full md:flex-row",children:[e.jsxs("div",{className:"md:bg-surface-subtle flex items-center justify-start gap-x-2 border-y-2 bg-neutral-400 py-2 md:min-w-16 md:flex-col md:border-y-0 md:py-0",children:[e.jsx("span",{className:"flex items-center font-bold md:flex md:h-[76px] md:border-y-2 md:bg-neutral-400 md:px-4 md:py-5",children:"編號"}),e.jsx("span",{className:"md:text-md md:bg-surface-subtle font-bold text-[#d18081] md:mt-4",children:s.id}),e.jsx(j,{to:`/budget/${s.id}`,className:"text-brand-primary md:bg-surface-subtle ml-2 text-xs md:ml-0",children:"[查看單頁]"})]}),e.jsx(f,{label:"部會",children:s.department}),e.jsx(f,{label:"審議日期（階段）",children:`${s.date} (${s.stage})`}),e.jsx(f,{label:"提案人（連署）",children:s.proposer.split(" ").map((l,n,d)=>e.jsxs(u.Fragment,{children:[l,n<d.length-1&&e.jsx("br",{})]},n))}),e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_2fr_2fr] grid-rows-[76px] justify-items-center text-center",children:[e.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"提案"}),e.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:w-[120px] md:border-y-2 md:bg-neutral-400 md:p-0",children:"審議結果"}),e.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"預算金額"}),e.jsx("p",{className:"flex size-full items-center justify-center border-b-2 bg-white px-2 py-3.5 font-bold md:border-y-2 md:bg-neutral-400 md:p-0",children:"減列/凍結金額"}),e.jsx("p",{className:"w-full py-2",children:s.proposalType}),e.jsx("p",{className:"w-full py-2",children:A(s.proposalResult)}),e.jsx("p",{className:"w-full py-2",children:s.originalAmount}),e.jsx("div",{className:"w-full py-2",children:(r=s.reducedAmount)==null?void 0:r.split(" / ").map((l,n,d)=>e.jsxs(u.Fragment,{children:[l,d.length>1&&n===0&&" /",d.length>1&&n===0&&e.jsx("br",{})]},n))})]}),e.jsx(f,{label:"提案內容",children:e.jsx(U,{content:s.proposalContent,itemId:s.id})}),e.jsx(f,{label:"關心數",children:a}),e.jsx(f,{label:"我要關心這個",children:e.jsx("div",{className:"mb-9 flex w-full flex-col items-center justify-center gap-y-4",children:e.jsx("div",{className:"flex w-full items-center justify-center rounded-3xl border-2 bg-white",children:e.jsx(C,{proposal:{id:s.id,react_angry:s.react_angry,react_disappoint:s.react_disappoint,react_good:s.react_good,react_whatever:s.react_whatever},singleButtonStyle:"max-w-[72px] text-[9px]",shouldShowCount:!1})})})})]})},J=({item:s})=>{var c;const t=_(s.id),a=(s.react_good??0)+(s.react_angry??0)+(s.react_disappoint??0)+(s.react_whatever??0),r=t?(t.react_good??0)+(t.react_angry??0)+(t.react_disappoint??0)+(t.react_whatever??0):a||(s.totalReacts??0),l=i.useRef(null),[,,n]=O();P(l,()=>{n(!1)});const o=s.id;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-start justify-start pt-3 text-sm",children:[e.jsx(j,{to:`/budget/${s.id}`,className:"text-[#d18081] hover:underline",children:s.id}),e.jsx(j,{to:`/budget/${s.id}`,className:"text-xs text-[#3e51ff]",children:"[查看單頁]"})]}),e.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:s.department}),e.jsxs("div",{className:"flex flex-col items-start justify-start pt-3 text-sm",children:[e.jsx("div",{children:s.date}),e.jsxs("div",{className:"text-gray-600",children:["(",s.stage,")"]})]}),e.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:s.proposer.split(" ").map((p,x,m)=>e.jsxs(u.Fragment,{children:[p,x<m.length-1&&e.jsx("br",{})]},x))}),e.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:s.proposalType}),e.jsx("div",{className:"flex items-start justify-center pt-3 text-sm",children:s.proposalResult}),e.jsx("div",{className:"flex items-start justify-start pt-3 text-sm",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("p",{className:"line-clamp-4",children:s.proposalContent}),e.jsxs(y,{children:[e.jsx(b,{asChild:!0,children:e.jsx("button",{type:"button",className:"cursor-pointer text-xs text-blue-600 hover:underline",children:"[更多]"})}),e.jsxs(g,{children:[e.jsx(v,{className:"fixed inset-0 bg-black/40"}),e.jsxs(N,{className:"fixed top-1/2 left-1/2 max-h-[80vh] w-[90vw] max-w-[720px] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-white p-4 shadow-lg",children:[e.jsx("div",{className:"leading-relaxed whitespace-pre-wrap",children:s.proposalContent}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(w,{asChild:!0,children:e.jsx("button",{className:"bg-brand-primary rounded px-3 py-1 text-white",children:"關閉"})})})]})]})]})]})}),e.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:e.jsx("div",{className:"w-full py-2 text-center",children:(c=s.reducedAmount)==null?void 0:c.split(" / ").map((p,x,m)=>e.jsxs(u.Fragment,{children:[p,m.length>1&&x===0&&" /",m.length>1&&x===0&&e.jsx("br",{})]},x))})}),e.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:s.originalAmount}),e.jsx("div",{className:"flex items-start justify-center pt-3 md:text-xs lg:text-sm",children:r}),e.jsx("div",{className:"flex items-start justify-center pt-3",children:e.jsx(C,{proposal:s,displayMode:"popup"},o)})]})},oe=({data:s,isDesktop:t,className:a=""})=>t?e.jsx("div",{className:`${a} space-y-10 md:pb-10`,children:s.map(r=>e.jsxs("div",{children:[e.jsx(G,{}),e.jsx("div",{className:`grid ${E}`,children:e.jsx(J,{item:r})})]},r.id))}):e.jsx("div",{className:`flex flex-col ${a}`,children:s.map(r=>e.jsx(q,{item:r},r.id))});export{oe as default};
