import{P as d}from"./gql-CXkKbLhy.js";const g={budget_review:"預算審議",budget_unfreeze:"預算解凍"};function D(e,t="階段"){return e?g[e]??t:t}const h={[d.Freeze]:"凍結",[d.Reduce]:"減列",[d.Other]:"主決議"},T={passed:"通過",rejected:"不通過",pending:"待審議",reserved:"保留",withdrawn:"撤案"},z={not_reviewed:"尚未審議",reviewing:"審議中",unfrozen:"已解凍"};function B(e){const t=(e??[]).filter(i=>!!i);return t.length===0?"未分類":t.map(i=>h[i]??i).join("、")}function E(e){if(!e)return"待審議";const t=e.trim().toLowerCase();return T[t]||e}function R(e){return e?z[e]??e??"未知狀態":null}function c(e){if(e==null)return"無預算金額";if(e===0)return"0";if(Math.abs(e)<1e4)return e.toLocaleString("zh-TW");const t=(r,f)=>{const u=r.toFixed(1);return`${u.endsWith(".0")?u.slice(0,-2):u} ${f}`},i=e/1e8;if(Math.abs(i)>=1)return t(i,"億");const n=e/1e4;return t(n,"萬")}function S(e,t){const i=e?c(e):"0",n=t?c(t):"0";return i==="0"&&n==="0"?"0":`${i} / ${n}`}function l(e){if(!e)return null;if(e instanceof Date)return e;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function L(e,t="會議"){const i=(e??[]).filter(n=>!!n).map(n=>({committee:n,startDate:l(n.startDate)})).filter(n=>!!n.startDate).reduce((n,r)=>n?r.startDate.getTime()>n.startDate.getTime()?r:n:r,null);return i?i.committee.name??i.committee.displayName??t:t}function w(e){return e?e.toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}):"日期未定"}function m(e,t,i,n){const r=l(e.meetingDate),f=`${n}-${t}`;return{id:e.id??f,date:w(r),title:L(e.committee,D(e.type,"會議")),historicalProposalId:e.id?i.get(e.id):void 0,description:e.description||e.location||"",meetingRecordUrl:e.meetingRecordUrl,isUnfreeze:e.type==="budget_unfreeze",rawDate:r}}function _(e,t,i){const n=e??[],r=i??[];if(n.length===0&&r.length===0)return[];const f=new Map;(t??[]).forEach(a=>{a!=null&&a.id&&(a.meetings??[]).forEach(o=>{o!=null&&o.id&&f.set(o.id,a.id)})});const u=n.map((a,o)=>m(a,o,f,"meeting")),s=r.map((a,o)=>m(a,o,f,"unfreeze"));return[...u,...s].sort((a,o)=>!a.rawDate&&!o.rawDate?0:a.rawDate?o.rawDate?o.rawDate.getTime()-a.rawDate.getTime():-1:1).map(({rawDate:a,...o})=>o)}function U(e,t,i){const n=[];return t!=null&&t.id?n.push({raw:t,isParent:!0}):i!=null&&i.id&&((e==null?void 0:e.length)??0)>0&&n.push({raw:i,isParent:!0}),e&&e.length>0&&e.forEach(r=>{r!=null&&r.id&&n.push({raw:r,isParent:!1})}),n.length===0?[]:n.map(({raw:r,isParent:f},u)=>{var s;return{id:(r==null?void 0:r.id)??`unknown-${u}`,date:"2025/08/01",proposers:((s=r==null?void 0:r.proposers)==null?void 0:s.map(a=>a==null?void 0:a.name).filter(Boolean).join("、"))||"未知",isParent:f}})}function b(e,t,i){const n=[e,t,i].filter(Boolean);return n.length===0?"暫無科目計畫":n.join(" > ")}function A(e){var n,r;if(!e)return!1;const t=!!((n=e.mergedParentProposals)!=null&&n.id),i=(((r=e.mergedProposals)==null?void 0:r.length)??0)>0;return t||i}function M(e){var t;return e?!!((t=e.historicalParentProposals)!=null&&t.id):!1}export{T as P,S as a,_ as b,U as c,E as d,b as e,c as f,B as g,A as h,R as i,M as j,D as m};
